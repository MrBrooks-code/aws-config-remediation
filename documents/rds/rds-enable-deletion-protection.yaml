schemaVersion: '0.3'
description: Enable deletion protection on an RDS instance
assumeRole: '{{ AutomationAssumeRole }}'
parameters:
  DbInstanceId:
    type: String
    description: RDS DB instance identifier
  AutomationAssumeRole:
    type: String
    description: IAM role for automation execution
mainSteps:
  - name: EnableDeletionProtection
    action: 'aws:executeAwsApi'
    inputs:
      Service: rds
      Api: ModifyDBInstance
      DBInstanceIdentifier: '{{ DbInstanceId }}'
      DeletionProtection: true
      ApplyImmediately: true
    description: Enable deletion protection
    isEnd: true
